{% extends "base/base.html" %}

{% block content %}
<h2>Documents</h2>

<table border="1">
  <tr>
    <th>Title</th>
    <th>Status</th>
    <th>Created At</th>
    <th>Actions</th>
  </tr>

  {% for doc in documents %}
    <tr>
      <td>
        {% if doc.status == 'DRAFT' and doc.created_by == user %}
          <a href="{% url 'workflow:document-edit' doc.id %}">
            {{ doc.title }}
          </a>
        {% else %}
          {{ doc.title }}
        {% endif %}
      </td>

      <td>{{ doc.get_status_display }}</td>
      <td>{{ doc.created_at }}</td>
      <td>
        {% if doc.status == 'DRAFT' %}
          <form method="post" action="{% url 'workflow:document-submit' doc.id %}">
            {% csrf_token %}
            <button type="submit">Submit</button>
          </form>
        {% else %}
          â€”
        {% endif %}
      </td>
    </tr>
  {% empty %}
    <tr>
      <td colspan="4">No documents found.</td>
    </tr>
  {% endfor %}
</table>
{% endblock %}
